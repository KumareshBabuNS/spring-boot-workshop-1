<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5.dev">
<title>Spring Boot Workshop</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1>Spring Boot Workshop</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>In this workshop, we will build a new Java REST application that is backed by Redis and push to Pivotal Cloud Foundry</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="trueprerequisites"><a class="anchor" href="#trueprerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">Java 1.8 SDK</a></p>
</li>
<li>
<p><a href="https://spring.io/tools">Spring Tool Suite</a> or <a href="https://www.jetbrains.com/idea/">IntelliJ</a> or <a href="https://eclipse.org/downloads/">Eclipse</a></p>
</li>
<li>
<p><a href="https://github.com/cloudfoundry/cli/releases">CF CLI</a></p>
</li>
<li>
<p><a href="http://curl.haxx.se/">Curl</a> (Optional)</p>
</li>
<li>
<p>Git CLI for <a href="https://github.com/git-for-windows/git/releases/download/v2.9.0.windows.1/Git-2.9.0-64-bit.exe">Windows</a> or Git from <a href="https://desktop.github.com/">github.com</a> (Optional)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truepart-1-spring-boot"><a class="anchor" href="#truepart-1-spring-boot"></a>Part 1: Spring Boot</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href=":https://projects.spring.io/spring-boot/">Spring Boot</a> takes an opinionated view of building production-ready Spring applications. Favoring convention over configuration, it is designed to get you up and running as quickly as possible.</p>
</div>
<div class="paragraph">
<p>Spring Boot features include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creates a stand alone runnable jar file which includes everything required to run it</p>
</li>
<li>
<p>Ability to embed Tomcat, Jetty or Undertow making deployment much easier</p>
</li>
<li>
<p>Provide an oopinionated starter dependencies to simplify your configuration</p>
</li>
<li>
<p>Automatically configures Spring whenever possible</p>
</li>
<li>
<p>Provides production ready features such as metrics, health checks and externalized configuration</p>
</li>
<li>
<p>No code generation or XML configuration required</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="trueexploring-spring-boot"><a class="anchor" href="#trueexploring-spring-boot"></a>Exploring Spring Boot</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="http://projects.spring.io/spring-boot/">Spring Boot</a> and explore</p>
<div class="imageblock">
<div class="content">
<img src="images/spring-boot.png" alt="spring boot.png">
</div>
</div>
</li>
<li>
<p>How do you find the documentation for a specific version of Spring Boot?</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truepart-2-spring-initializr"><a class="anchor" href="#truepart-2-spring-initializr"></a>Part 2: Spring Initializr</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The easiest way to create your Spring Boot applications is to use <a href="http://start.spring.io">Spring Initialzr</a>. Spring Initializr makes is very easy to get started. It takes care of setting up your project by creating the necessary folder structure, the required project artifacts along with the dependencies and it creates a build file. By simply entering in some basic information, you can then download a Java project that is ready to be imported into your IDE of your choosing.</p>
</div>
<div class="sect2">
<h3 id="trueexploring-spring-initializr"><a class="anchor" href="#trueexploring-spring-initializr"></a>Exploring Spring Initializr</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="http://start.spring.io">start.spring.io</a> and explore.</p>
<div class="imageblock">
<div class="content">
<img src="images/spring-initalizer-0.png" alt="spring initalizer 0.png">
</div>
</div>
<div class="paragraph">
<p>Notice the various options that are available.</p>
</div>
</li>
<li>
<p>What types of projects can be created?</p>
</li>
<li>
<p>What versions are supported?</p>
</li>
<li>
<p>What happens when you start typing in the Dependencies text box?</p>
</li>
<li>
<p>What does the full version look like?</p>
</li>
<li>
<p>What happens when you click on the Generate Project button?</p>
</li>
<li>
<p>How would you change the Java version you are targeting?</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truepart-3-creating-the-project"><a class="anchor" href="#truepart-3-creating-the-project"></a>Part 3: Creating the project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this seciton we will start the process of creating the application we will use in this workshop.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="http://start.spring.io">start.spring.io</a></p>
</li>
<li>
<p>Generate a <strong>Maven Project</strong> with Spring Boot version <strong>1.5.1</strong></p>
</li>
<li>
<p>In the Project Metadata section</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Under Group, enter: <strong>io.pivotal.demo</strong> or something similar. This will be your Java package name</p>
</li>
<li>
<p>Under Artitfact enter: <strong>Spring-Person</strong> or something similar. This will be the name of your Java App</p>
<div class="imageblock">
<div class="content">
<img src="images/spring-initializer-1.png" alt="spring initializer 1.png">
</div>
</div>
</li>
<li>
<p>Under the Generate Project button, click the link to switch to the full version. We will now select the dependencies our application will have.</p>
</li>
<li>
<p>Under the <strong>Web Section</strong>, select</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Web</p>
</li>
<li>
<p>Jersey (JAX-RS)</p>
</li>
</ol>
</div>
</li>
<li>
<p>Scroll down to the <strong>SQL</strong> and select</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>JPA</p>
</li>
</ol>
</div>
</li>
<li>
<p>Scroll down to the <strong>NoSQL section</strong> and select</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Redis</p>
</li>
</ol>
</div>
</li>
<li>
<p>Scroll down to the <strong>Cloud Core section</strong> and select</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Cloud Connectors</p>
</li>
</ol>
</div>
</li>
<li>
<p>Scroll down to the <strong>Cloud Discovery section</strong> and select</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Cloud Foundry Discovery</p>
</li>
</ol>
</div>
</li>
<li>
<p>Scroll down to the <strong>Ops section</strong> and select</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Actuator</p>
</li>
<li>
<p>Actuator Docs</p>
</li>
</ol>
</div>
</li>
<li>
<p>You are now ready generate the project so click the green "Generate Project" button. This will download your new Java project with the required dependencies for you. The downloaded file will be in a compressed (zip) file containing everything you need.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="trueimporting-into-your-ide"><a class="anchor" href="#trueimporting-into-your-ide"></a>Importing into your IDE</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Uncompress the zip file to a location of your choosing. Make sure it keeps the folder structure. Remeber this location as we&#8217;ll need it shortly.</p>
</li>
<li>
<p>Now start up your favorite Java IDE. Spring Tool Suite, IntelliJ and Eclipse are common choices.</p>
</li>
<li>
<p>The next step is to import the project you just uncompressed within your Java IDE. Look for an option to import an existing Maven project. Navigate to the folder and walk through the prompts. Note that the image below is captured from STS / Eclipse.</p>
<div class="imageblock">
<div class="content">
<img src="images/sts-import-project.png" alt="Importing Maven Project using STS / Eclipse">
</div>
</div>
<div class="paragraph">
<p>You might need to wait for the IDE to import the various dependencies. The image below shows the following progress indicator on the lower right portion of the IDE. Note that this is from STS / Eclipse.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/waiting-for-import.png" alt="waiting for import.png">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truepart-4-build-and-run-your-application"><a class="anchor" href="#truepart-4-build-and-run-your-application"></a>Part 4:Build and Run your application</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build and Run your application in your IDE</p>
<div class="imageblock">
<div class="content">
<img src="images/running-in-sts.png" alt="running in sts.png">
</div>
</div>
</li>
<li>
<p>Hmmm. The application didn&#8217;t start. Taking a look at the logs note the error:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>2017-02-13 14:42:44.617 ERROR 11158 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   :

***************************
APPLICATION FAILED TO START
***************************

Description:

Cannot determine embedded database driver class for database type NONE

Action:

If you want an embedded database please put a supported one on the classpath. If you have database settings to be loaded from a particular profile you may need to active it (no profiles are currently active).</code></pre>
</div>
</div>
<div class="paragraph">
<p>The error provides a clue as to what is missing. Spring is attempting to instantiate an in-memory database and is not able to do so.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>To fix this do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open up the <strong>SpringPersonApplication</strong> class in the <strong>io.pivotal.demo</strong> package.</p>
</li>
<li>
<p>Add the following imports</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;
import org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration;</code></pre>
</div>
</div>
</li>
<li>
<p>And add the following annotation after the @SpringBootApplication but before the class definition:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>@EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})</code></pre>
</div>
</div>
<div class="paragraph">
<p>This annotation tells Spring to disable auto configuration for Hibernate JPA data sources.</p>
</div>
</li>
<li>
<p>Save the class</p>
</li>
<li>
<p>Run the application. The application should start without any errors.</p>
</li>
<li>
<p>Open a browser to navigate to <a href="http://localhost:8080" class="bare">http://localhost:8080</a>. Notice that by default, the application is protected with Basic Authentication. If you look in the output log, you&#8217;ll find the password which will look similar to this:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>2017-02-13 14:58:42.090  INFO 11406 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2017-02-13 14:58:42.482  INFO 11406 --- [           main] b.a.s.AuthenticationManagerConfiguration :

Using default security password: xxxxxxxx-yyyy-zzzz-aaaa-bbbbbbbbbbbb

2017-02-13 14:58:42.522  INFO 11406 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Creating filter chain: OrRequestMatcher [], []
2017-02-13 14:58:42.581  INFO 11406 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Creating filter chain: org.springframework.boot.actuate.autoconfigure.ManagementWebSecurityAutoConfiguration$LazyEndpointPathRequestMatcher@49f3ff41, []</code></pre>
</div>
</div>
</li>
<li>
<p>Use <strong>user</strong> as the user name and the password found in your output logs to log in. You&#8217;ll see the following error:</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/first-time-running.png" alt="first time running.png">
</div>
</div>
<div class="paragraph">
<p>So what just happened? We created a spring-initializer project with some dependencies, downloaded the project and then ran it. Under the covers, it is using <a href="https://projects.spring.io/spring-boot/">Spring Boot</a>. Spring Boot takes an opinionated view of building production-ready Spring applications. It favors convention over configuration and is designed to get you up and running very quickly.</p>
</div>
<div class="paragraph">
<p>The example application that we just ran included Tomcat as an application server because of the choices made when generating the project earlier.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>What dependencies did spring boot include in the pom.xml file?</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="truedisabling-security"><a class="anchor" href="#truedisabling-security"></a>Disabling Security</h3>
<div class="paragraph">
<p>Let&#8217;s disable the need for entering in a user name and password.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the application.properties file. It is located in the src/main/resources folder.</p>
</li>
<li>
<p>Add the following line to the file</p>
<div class="listingblock">
<div class="content">
<pre>security.ignored=/**</pre>
</div>
</div>
</li>
<li>
<p>Save the file</p>
</li>
<li>
<p>Build and run the application. (Make sure you stop the running application first)</p>
</li>
<li>
<p>Open a Browser and navigate to <a href="http://localhost:8080" class="bare">http://localhost:8080</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notice that now you are not prompted to log in to view the website.</p>
</div>
<div class="paragraph">
<p>So what just happened? We effectively told the Security subsystem not to require security for anything under the top level folder. In a more sophisticated application there would be more rules to define where security is and is not required.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truepart-5-adding-functionality"><a class="anchor" href="#truepart-5-adding-functionality"></a>Part 5: Adding Functionality</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we will continue to add additional capabilities to our application.</p>
</div>
<div class="sect2">
<h3 id="trueadding-domain-object"><a class="anchor" href="#trueadding-domain-object"></a>Adding Domain Object</h3>
<div class="paragraph">
<p>The first step of enhancing our application is by adding a domain object. This object represents the information we want to store within a repository later on.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new Java Class called <strong>Person</strong> in the <strong>io.pivotal.demo.domain</strong> package</p>
</li>
<li>
<p>This class will have 3 properties: firstName, lastName, and emailAddress. Use the following code snippet for the class:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>import org.springframework.data.annotation.Id;
import org.springframework.data.redis.core.RedisHash;

@RedisHash("persons")
public class Person {

	private String firstName;
	private String lastName;
	private @Id String emailAddress;

	public Person() {
	}

	public Person(String firstName, String lastName, String emailAddress) {
		this.firstName = firstName;
		this.lastName = lastName;
		this.emailAddress = emailAddress;
	}

	public String getFirstName() {
		return firstName;
	}

	public void setFirstName(String firstName) {
		this.firstName = firstName;
	}

	public String getLastName() {
		return lastName;
	}

	public void setLastName(String lastName) {
		this.lastName = lastName;
	}

	public String getEmailAddress() {
		return emailAddress;
	}

	public void setEmailAddress(String emailAddress) {
		this.emailAddress = emailAddress;
	}

	@Override
	public String toString() {
		return "Person [firstName=" + firstName + ", lastName=" + lastName
				+ ", emailAddress=" + emailAddress + "]";
	}

}</code></pre>
</div>
</div>
</li>
<li>
<p>Save the file</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="truecreating-a-repostiory"><a class="anchor" href="#truecreating-a-repostiory"></a>Creating a Repostiory</h3>
<div class="paragraph">
<p>Next let&#8217;s create a repository to store the Person information from the Person class we created above.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new Java Interface called <strong>PersonRepository</strong> in the <strong>io.pivotal.demo.repository</strong> package. This interface will extend the CrudRepository interface and Spring with provide an implementation with all of the necessary methods at runtime.  Additional methods not provided by CrudRepository could be declared here as well, but that is not necessary for this example.</p>
</li>
<li>
<p>Use the snippet below to create the contents of this class:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>import org.springframework.data.repository.CrudRepository;

import io.pivotal.demo.domain.Person;

public interface PersonRepository extends CrudRepository&lt;Person, String&gt; {

}</code></pre>
</div>
</div>
</li>
<li>
<p>Save the file</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="truesample-data"><a class="anchor" href="#truesample-data"></a>Sample Data</h3>
<div class="paragraph">
<p>In order to test our services, it would be helpful to have some data pre-populated at startup.  Let&#8217;s create some sample data to load into the repository.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new file called <strong>persons.json</strong> in the <strong>src/main/resources</strong> folder</p>
</li>
<li>
<p>Edit the contents of this file to contain the following. Feel free to add additional entries if you would like.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>[
	{
		"_class": "io.pivotal.demo.domain.Person",
		"emailAddress" : "johndoe@nowhere.com",
		"firstName" : "John",
		"lastName" : "Doe"
	},
	{
		"_class": "io.pivotal.demo.domain.Person",
		"emailAddress" : "jane@somewhere.com",
		"firstName" : "Jane",
		"lastName" : "Smith"
	},
	{
		"_class": "io.pivotal.demo.domain.Person",
		"emailAddress" : "bobevans@someplace.com",
		"firstName" : "Bob",
		"lastName" : "Evans"
	}
]</code></pre>
</div>
</div>
</li>
<li>
<p>Save the file</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="truecreating-a-repository-configuration"><a class="anchor" href="#truecreating-a-repository-configuration"></a>Creating a Repository Configuration</h3>
<div class="paragraph">
<p>We have created a repository and some data, but we need to tell Spring how to actually populate the repository with the file.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new Java Class called <strong>RepoConfig</strong> in the <strong>io.pivotal.demo.config</strong> package</p>
</li>
<li>
<p>Edit the contents of this file to contain the following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.io.ClassPathResource;
import org.springframework.core.io.Resource;
import org.springframework.data.redis.repository.configuration.EnableRedisRepositories;
import org.springframework.data.repository.init.Jackson2RepositoryPopulatorFactoryBean;

@Configuration
@EnableRedisRepositories
public class RepoConfig {
	  @Bean
	  public Jackson2RepositoryPopulatorFactoryBean repositoryPopulator() {

	    Resource sourceData = new ClassPathResource("persons.json");

	    Jackson2RepositoryPopulatorFactoryBean factory = new Jackson2RepositoryPopulatorFactoryBean();
	    // Set a custom ObjectMapper if Jackson customization is needed
	    factory.setResources(new Resource[] { sourceData });
	    return factory;
	  }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Save the file</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This RepoConfig class is used to create a new repository populator object based on Jackson - a library that can be used to parse JSON into Java objects.  This populator will read the persons.json file created previously, parse it into Person objects, and store them in Redis.</p>
</div>
<div class="paragraph">
<p>This class also uses an annontation '@EnableRedisRepositories' that tells Spring that the repo uses a Redis datastore, and to look for a connection.</p>
</div>
</div>
<div class="sect2">
<h3 id="truecreating-rest-endpoints"><a class="anchor" href="#truecreating-rest-endpoints"></a>Creating REST Endpoints</h3>
<div class="paragraph">
<p>Now that we have a domain object, and some sample data, the next step is to add REST endpoints that provide an API for manipulating the data.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new Java Class called <strong>PersonController</strong> in the <strong>io.pivotal.demo.controller</strong> package</p>
</li>
<li>
<p>Edit the contents of this file to contain the following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>import javax.validation.Valid;

import io.pivotal.demo.domain.Person;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.repository.CrudRepository;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping(value = "/persons")
public class PersonController {

	private CrudRepository&lt;Person, String&gt; repository;

	@Autowired
	public PersonController(CrudRepository&lt;Person, String&gt; repository)
	{
		this.repository = repository;
	}

	@RequestMapping(method = RequestMethod.GET)
	public Iterable&lt;Person&gt; persons()
	{
		return repository.findAll();
	}

	@RequestMapping(method = RequestMethod.PUT)
    public Person add(@RequestBody @Valid Person person) {
        return repository.save(person);
    }

    @RequestMapping(method = RequestMethod.POST)
    public Person update(@RequestBody @Valid Person person) {
        return repository.save(person);
    }

    @RequestMapping(value = "/{emailAddress:.+}", method = RequestMethod.GET)
    public Person getById(@PathVariable String emailAddress) {
        return repository.findOne(emailAddress);
    }

    @RequestMapping(value = "/{emailAddress:.+}", method = RequestMethod.DELETE)
    public void deleteById(@PathVariable String emailAddress) {
        repository.delete(emailAddress);
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Save the File</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>What does this class do? First, it defines a @RestController located at the /persons URI. When running, this means the URL would be <a href="http://spring-persons-xxx.my-cf-domain.com/persons" class="bare">http://spring-persons-xxx.my-cf-domain.com/persons</a>.</p>
</div>
<div class="paragraph">
<p>Inside of this class, the constructor is annotated with the @Autowired attribute which let&#8217;s Spring know it will be constructing this class on our behalf. That way, we can determine later what CrudRepository we want to use. In our case, we only have one implementation, but you could add a MySQL or HSQL or another implmentation at a later date if you wanted to.</p>
</div>
<div class="paragraph">
<p>Then we have various methods that are annotated with a specific @RequestMapping annotation that indicates when this method should be called. For example, in the case of the <em>Iterable</em> method, it returns a Iterator over a collection of Persons. Similarly there are other methods that allow you to find an person by email address (<em>getById()</em> using an HTTP GET), add a new person (<em>add()</em> using HTTP PUT), updating a person (<em>update()</em> using HTTP POST) and deleting a person (<em>deleteById()</em> using HTTP DELETE).</p>
</div>
<div class="paragraph">
<p>Another interesting thing to note here is that there are annotations that map a Request Body (@RequestBody) to a Person instance. So in the case of the <em>update()</em> method, when sending a request to update, Spring is expecting to find a Person object in the request body, pulls it out , creates a Person object and calls the update method. It is taking care of the usual work of parsing the body, deserializing the parameters, validating them and then constructing the object required.</p>
</div>
<div class="paragraph">
<p>Validate that the other endpoints work by using a REST tool like curl or a browser plugin to add, retrieve, update, and delete a person from your repository.</p>
</div>
</div>
<div class="sect2">
<h3 id="truepart-6-running-on-pivotal-cloud-foundry"><a class="anchor" href="#truepart-6-running-on-pivotal-cloud-foundry"></a>Part 6: Running on Pivotal Cloud Foundry</h3>
<div class="paragraph">
<p>Now that the application has all the necessary features completed, it is time to push to Pivotal Cloud Foundry and bind to Redis as a backing store.</p>
</div>
<div class="sect3">
<h4 id="truepushing-to-pivotal-cloud-foundry"><a class="anchor" href="#truepushing-to-pivotal-cloud-foundry"></a>Pushing to Pivotal Cloud Foundry</h4>
<div class="paragraph">
<p>Before we deploy to cloud foundry there are a few things that need to occur.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you haven&#8217;t already, download the latest release of the Cloud Foundry CLI from <a href="https://github.com/cloudfoundry/cli/releases">CF CLI</a> for your operating system and install it.</p>
</li>
<li>
<p>Set the API target for the CLI: (this information will be provided to you in the workshop)</p>
<div class="listingblock">
<div class="content">
<pre>$ cf api https://api.sys.cloud.rick-ross.com --skip-ssl-validation</pre>
</div>
</div>
</li>
<li>
<p>Login to Pivotal Cloudfoundry:</p>
<div class="listingblock">
<div class="content">
<pre>$ cf login</pre>
</div>
</div>
</li>
<li>
<p>Follow the prompts, using the username &amp; password provided to you during the workshop.</p>
</li>
<li>
<p>Build the application jar file</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ cd &lt;location of your project&gt;
$ ./mvnw clean package -DskipTests</code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates a self-contained Jar file for the application in the <em>target</em> folder. As an alternative, you can create the jar file within your IDE. For the purposes of this example, it is assumed that the location of the jar file is in the <em>target</em> folder.</p>
</div>
<div class="paragraph">
<p>Notice the <strong>-DskipTest</strong> argument which tells Maven that it should not run the unit tests. The reason we are using specifying this is because running the tests locally will fail because it will not be able to locate a local Redis repository.</p>
</div>
</li>
<li>
<p>Push the application using the following command line</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ cf push spring-person --no-start --random-route -p target/Spring-Person-0.0.1-SNAPSHOT.jar
Creating app spring-person in org pivotal / space development as rross@pivotal.io...
OK

Creating route spring-person-commemoratory-isogeny.app.cloud.rick-ross.com...
OK

Binding spring-person-commemoratory-isogeny.app.cloud.rick-ross.com to spring-person...
OK

Uploading spring-person...
Uploading app files from: /var/folders/mw/n4bhxvfn7wb4dw9rz8kznwcw0000gp/T/unzipped-app029402170
Uploading 24.4M, 187 files
Done uploading
OK</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command uploads the application to Pivotal Cloud Foundry, and does not start it because we still need to set up a Redis service.</p>
</div>
</li>
<li>
<p>Browse the Marketplace</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ cf marketplace
Getting services from marketplace in org pivotal / space development as rross@pivotal.io...
OK

service                       plans                     description
app-autoscaler                standard                  Scales bound applications in response to load (beta)
p-circuit-breaker-dashboard   standard                  Circuit Breaker Dashboard for Spring Cloud Applications
p-config-server               standard                  Config Server for Spring Cloud Applications
p-mysql                       100mb                     MySQL databases on demand
p-rabbitmq                    standard                  RabbitMQ is a robust and scalable high-performance multi-protocol messaging broker.
p-redis                       shared-vm, dedicated-vm   Redis service to provide a key-value store
p-service-registry            standard                  Service Registry for Spring Cloud Applications

TIP:  Use 'cf marketplace -s SERVICE' to view descriptions of individual plans of a given service.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that there is a Redis service we can use. It is called "p-redis" and there are two plans: dedicated-vm and shared-vm.</p>
</div>
</li>
<li>
<p>Create a Redis service using the shared-vm plan</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ cf create-service p-redis shared-vm SpringPersonRedis
OK</code></pre>
</div>
</div>
</li>
<li>
<p>Bind the application to this service</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ cf bind-service spring-person SpringPersonRedis
OK
TIP: Use 'cf restage spring-person' to ensure your env variable changes take effect</code></pre>
</div>
</div>
</li>
<li>
<p>Start the application</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ cf start spring-person
Starting app spring-person in org pivotal / space development as rross@pivotal.io...
Downloading binary_buildpack...
Downloading ruby_buildpack...
Downloading python_buildpack...
Downloading nodejs_buildpack...
Downloading go_buildpack...
Downloaded ruby_buildpack
Downloading staticfile_buildpack...
Downloaded binary_buildpack
Downloading java_buildpack_offline...
Downloaded nodejs_buildpack
Downloaded go_buildpack
Downloading php_buildpack...
Downloaded python_buildpack
Downloading dotnet_core_buildpack...
Downloaded staticfile_buildpack
Downloaded dotnet_core_buildpack
Downloaded php_buildpack
Downloaded java_buildpack_offline
Creating container
Successfully created container
Downloading app package...
Downloaded app package (37.3M)
Staging...
-----&gt; Java Buildpack Version: v3.10 (offline) | https://github.com/cloudfoundry/java-buildpack.git#193d6b7
-----&gt; Downloading Open Jdk JRE 1.8.0_111 from https://java-buildpack.cloudfoundry.org/openjdk/trusty/x86_64/openjdk-1.8.0_111.tar.gz (found in cache)
       Expanding Open Jdk JRE to .java-buildpack/open_jdk_jre (1.1s)
-----&gt; Downloading Open JDK Like Memory Calculator 2.0.2_RELEASE from https://java-buildpack.cloudfoundry.org/memory-calculator/trusty/x86_64/memory-calculator-2.0.2_RELEASE.tar.gz (found in cache)
       Memory Settings: -XX:MetaspaceSize=104857K -XX:MaxMetaspaceSize=104857K -Xss349K -Xmx681574K -Xms681574K
-----&gt; Downloading Spring Auto Reconfiguration 1.10.0_RELEASE from https://java-buildpack.cloudfoundry.org/auto-reconfiguration/auto-reconfiguration-1.10.0_RELEASE.jar (found in cache)
Exit status 0
Staging complete
Uploading droplet, build artifacts cache...
Uploading build artifacts cache...
Uploading droplet...
Uploaded build artifacts cache (109B)
Uploaded droplet (82.4M)
Uploading complete
Destroying container
Successfully destroyed container

0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
0 of 1 instances running, 1 starting
1 of 1 instances running

App started


OK

App spring-person was started using this command `CALCULATED_MEMORY=$($PWD/.java-buildpack/open_jdk_jre/bin/java-buildpack-memory-calculator-2.0.2_RELEASE -memorySizes=metaspace:64m..,stack:228k.. -memoryWeights=heap:65,metaspace:10,native:15,stack:10 -memoryInitials=heap:100%,metaspace:100% -stackThreads=300 -totMemory=$MEMORY_LIMIT) &amp;&amp; JAVA_OPTS="-Djava.io.tmpdir=$TMPDIR -XX:OnOutOfMemoryError=$PWD/.java-buildpack/open_jdk_jre/bin/killjava.sh $CALCULATED_MEMORY" &amp;&amp; SERVER_PORT=$PORT eval exec $PWD/.java-buildpack/open_jdk_jre/bin/java $JAVA_OPTS -cp $PWD/. org.springframework.boot.loader.JarLauncher`

Showing health and status for app spring-person in org pivotal / space development as rross@pivotal.io...
OK

requested state: started
instances: 1/1
usage: 1G x 1 instances
urls: spring-person-heterochromatic-eelgrass.app.cloud.rick-ross.com
last uploaded: Mon Feb 13 21:41:03 UTC 2017
stack: cflinuxfs2
buildpack: java-buildpack=v3.10-offline-https://github.com/cloudfoundry/java-buildpack.git#193d6b7 java-main open-jdk-like-jre=1.8.0_111 open-jdk-like-memory-calculator=2.0.2_RELEASE spring-auto-reconfiguration=1.10.0_RELEASE

     state     since                    cpu    memory       disk         details
#0   running   2017-02-13 04:42:12 PM   0.0%   287M of 1G   165M of 1G</code></pre>
</div>
</div>
</li>
<li>
<p>Open a browser and go to the URL indicated in the urls: line above, with "/persons" appended to the end of it. In this case the url is <a href="https://spring-person-heterochromatic-eelgrass.app.cloud.rick-ross.com/persons" class="bare">https://spring-person-heterochromatic-eelgrass.app.cloud.rick-ross.com/persons</a></p>
<div class="imageblock">
<div class="content">
<img src="images/running-on-pcf.png" alt="running on pcf.png">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now we have an application that runs on Pivotal Cloud Foundry.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truecreating-a-manifest"><a class="anchor" href="#truecreating-a-manifest"></a>Creating a Manifest</h3>
<div class="paragraph">
<p>To make it easier to push updates to Pivotal Cloud Foundry, let&#8217;s create a manifest file.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a file called manifest.yml and put it in the same folder that contains the pom.xml file.</p>
</li>
<li>
<p>Edit the contents of this file to contain the following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>---
applications:
- name: spring-person
  memory: 1G
  random-route: true
  path: target/Spring-Person-0.0.1-SNAPSHOT.jar
  services:
   - SpringPersonRedis</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the Name of the Service needs to match the service you created previously. In this case it is <em>SpringPersonRedis</em>.</p>
</div>
</li>
<li>
<p>Save the file</p>
</li>
<li>
<p>Push the application again this time with no arguments</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ cf push</code></pre>
</div>
</div>
</li>
<li>
<p>Open a browser and navigate to the /persons URL to verify the applicaiton is working</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="truepart-7-testing-the-other-rest-endpoints-optional"><a class="anchor" href="#truepart-7-testing-the-other-rest-endpoints-optional"></a>Part 7: Testing the other REST endpoints (Optional)</h3>
<div class="paragraph">
<p>If you have curl installed, you can add, retrieve, update and delete records using the REST API that we created. The sections below walk you through the process of using those APIs. Note that the URLs in this seciton are using HTTP and not HTTPS.</p>
</div>
<div class="sect3">
<h4 id="trueadding-a-new-record"><a class="anchor" href="#trueadding-a-new-record"></a>Adding a New Record</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ curl -H "Content-Type: application/json" -X PUT  -d '{"firstName":"My","lastName":"Name","emailAddress":"myname@example.com"}' http://&lt;your application URL goes here&gt;/persons</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="trueretrieving-a-record"><a class="anchor" href="#trueretrieving-a-record"></a>Retrieving a Record</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ curl -H "Content-Type: application/json" -X GET http://&lt;your application URL goes here&gt;/persons/myname%40example.com</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="trueupdating-a-record"><a class="anchor" href="#trueupdating-a-record"></a>Updating a Record</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ curl -H "Content-Type: application/json" -X POST  -d '{"firstName":"My","lastName":"RealName","emailAddress":"myname@example.com"}' http://&lt;your application URL goes here&gt;/persons</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truedeleting-a-record"><a class="anchor" href="#truedeleting-a-record"></a>Deleting a Record</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ curl -H "Content-Type: application/json" -X DELETE http://&lt;your application URL goes here&gt;/persons/myname%40example.com</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truepart-8-actuator"><a class="anchor" href="#truepart-8-actuator"></a>Part 8: Actuator</h3>
<div class="paragraph">
<p>Remember earlier, when we selected dependencies for this project? We chose the Actuator and Actuator Docs dependencies. In this section, we&#8217;ll explore what Actuators are and how to use them.</p>
</div>
<div class="paragraph">
<p>One thing that all applicaitons have in common is the need to monitor and manage them.</p>
</div>
<div class="sect3">
<h4 id="trueactuator-endpoints"><a class="anchor" href="#trueactuator-endpoints"></a>Actuator Endpoints</h4>
<div class="paragraph">
<p>Spring Boot includes a number of built-in actuator endpoints that enable you to montior and interact with your application. Most endpoints are exposed via HTTP although other methods are available.</p>
</div>
<div class="paragraph">
<p>The most common endpoints are shown below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>health - Lists application health information</p>
</li>
<li>
<p>beans - Displays a list of all Spring Beans</p>
</li>
<li>
<p>info - Displays arbitrary application information</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It&#8217;s important to note that not all endpoints are always on due to potential security concerns. Later on, we&#8217;ll change the behavior and enable endpoints.</p>
</div>
<div class="paragraph">
<p>For a list of all of the available endpoints see this <a href="http://docs.spring.io/spring-boot/docs/1.5.1.RELEASE/reference/htmlsingle/#production-ready-endpoints">link</a></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>What happens when you go to your application&#8217;s /health endpoint in a browser? (e.g. <a href="http://&lt;your" class="bare">http://&lt;your</a> application URL goes here&gt;/health)</p>
</li>
<li>
<p>What happens when you go to your application&#8217;s /docs endpoint?</p>
</li>
<li>
<p>What happens when you go to your application&#8217;s /info endpoint?</p>
</li>
<li>
<p>What happens when you go to your application&#8217;s /autoconfig endpoint?</p>
</li>
<li>
<p>What happens when you go to your application&#8217;s /beans endpoint?</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="trueunlocking-protected-endpoints"><a class="anchor" href="#trueunlocking-protected-endpoints"></a>Unlocking Protected Endpoints</h5>
<div class="paragraph">
<p>In Spring Boot 1.5 and above, all actuator endpoints, with the exception of /health and /info are secured by default. Let&#8217;s make a change to our application to make the other endpoints visible.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the application.properties file. It is located in the src/main/resources folder.</p>
</li>
<li>
<p>Add the following line to the file</p>
<div class="listingblock">
<div class="content">
<pre>endpoints.sensitive=false</pre>
</div>
</div>
</li>
<li>
<p>Save the file</p>
</li>
<li>
<p>Build the application jar file</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ cd &lt;location of your project&gt;
$ ./mvnw clean package -DskipTests</code></pre>
</div>
</div>
</li>
<li>
<p>Push the application to Pivotal Cloud Foundry</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ cf push</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Let&#8217;s hit a few of the endpoints that gave errors before.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>What happens when you visit the /beans endpoint?</p>
</li>
<li>
<p>What happens when you visit the /autoconfig endpoint?</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Try a few more of the endpoints and become familiar with the type of information they provide. Note that the output is in JSON format so using a JSON pretty printer like <a href="http://jsonprettyprint.com">this</a> one is very helpful to make the output more readible.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="trueactuator-integration-with-pivotal-cloud-foundry"><a class="anchor" href="#trueactuator-integration-with-pivotal-cloud-foundry"></a>Actuator Integration with Pivotal Cloud Foundry</h4>
<div class="paragraph">
<p>Starting in Pivotal Cloud Foundry 1.9 and above, the Pivotal Apps Manager provides additional functionality for Spring Boot applications 1.5 and higher. In order to take advantage of these capabilities, let&#8217;s take a look at the application details in Apps Manager before we explore the additional capabilities.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the Apps Manager in a browser</p>
</li>
<li>
<p>Navigate to the Org and Space you are deploying the application to</p>
</li>
<li>
<p>Click on spring-person application and the following screen appears:</p>
<div class="imageblock">
<div class="content">
<img src="images/app-manager.png" alt="app manager.png">
</div>
</div>
</li>
<li>
<p>Navigate into the Settings tab and notice the entries that are listed</p>
<div class="ulist">
<ul>
<li>
<p>App Name</p>
</li>
<li>
<p>Info</p>
<div class="imageblock">
<div class="content">
<img src="images/spring-person-settings.png" alt="spring person settings.png">
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="trueadding-git-information-optional"><a class="anchor" href="#trueadding-git-information-optional"></a>Adding Git Information (Optional)</h5>
<div class="paragraph">
<p>This step requires that you have installed git on your computer. You will need to be able to create a local repository in order for this step to work.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the pom.xml file. It is located in the root folder of the project.</p>
</li>
<li>
<p>Navigate down to the plugin section. Add the following snippet below the existing spring-boot-maven-plugin</p>
<div class="listingblock">
<div class="content">
<pre>	        &lt;plugin&gt;
	            &lt;groupId&gt;pl.project13.maven&lt;/groupId&gt;
	            &lt;artifactId&gt;git-commit-id-plugin&lt;/artifactId&gt;
	        &lt;/plugin&gt;</pre>
</div>
</div>
</li>
<li>
<p>Save the file</p>
</li>
<li>
<p>Edit the application.properties file. It is located in the src/main/resources folder.</p>
</li>
<li>
<p>Add the following line to the end of the file</p>
<div class="listingblock">
<div class="content">
<pre>management.info.git.mode=full</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>These changes that we added to the project adds Git information to the /info endpoint. For additional details visit this <a href="http://docs.pivotal.io/pivotalcf/1-9/console/spring-boot-actuators.html#git-info">link</a></p>
</div>
<div class="paragraph">
<p>By adding these configuration changes (specifically the git commit plugin XML) you are indicating that your application has a git repository. Since we have started from scratch, let&#8217;s create a git repository.</p>
</div>
<div class="paragraph">
<p>Note: Failure to create a git repository will result in a build error.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open up a Command prompt or terminal window</p>
</li>
<li>
<p>Change directories to the location of your application</p>
</li>
<li>
<p>Run the following Git commands to initialize, add files and commit to the local repository</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ git init
$ git add .gitignore manifest.yml mvnw mvnw.cmd pom.xml src/
$ git commit -m 'Initial commit'</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="trueadding-additional-information-into-apps-manager"><a class="anchor" href="#trueadding-additional-information-into-apps-manager"></a>Adding Additional Information into Apps Manager</h5>
<div class="paragraph">
<p>Let&#8217;s make a few minor changes to our application to expose additional details.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the pom.xml file. It is located in the root folder of the project</p>
</li>
<li>
<p>Navigate down to the plugin section. Add the following snippet below the artifactId for spring-boot-maven-plugin</p>
<div class="listingblock">
<div class="content">
<pre>		&lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;build-info&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The full section should look like this without the git entry.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>	&lt;build&gt;
		&lt;plugins&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
				&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
				&lt;executions&gt;
                    			&lt;execution&gt;
                        			&lt;goals&gt;
                            				&lt;goal&gt;build-info&lt;/goal&gt;
                        			&lt;/goals&gt;
                    			&lt;/execution&gt;
                		&lt;/executions&gt;
			&lt;/plugin&gt;
		&lt;/plugins&gt;
	&lt;/build&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>With the <strong>optional</strong> <em>Git Information</em>, this section looks like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre>	&lt;build&gt;
		&lt;plugins&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
				&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
				&lt;executions&gt;
                    			&lt;execution&gt;
                        			&lt;goals&gt;
                            				&lt;goal&gt;build-info&lt;/goal&gt;
                        			&lt;/goals&gt;
                    			&lt;/execution&gt;
                		&lt;/executions&gt;
			&lt;/plugin&gt;
	        &lt;plugin&gt;
	            &lt;groupId&gt;pl.project13.maven&lt;/groupId&gt;
	            &lt;artifactId&gt;git-commit-id-plugin&lt;/artifactId&gt;
	        &lt;/plugin&gt;
		&lt;/plugins&gt;
	&lt;/build&gt;</pre>
</div>
</div>
</li>
<li>
<p>Save the file</p>
</li>
<li>
<p>Edit the application.properties file. It is located in the src/main/resources folder.</p>
</li>
<li>
<p>Add the following line to the end of the file</p>
<div class="listingblock">
<div class="content">
<pre>management.cloudfoundry.skip-ssl-validation=true
info.app.version.java=@java.version@
info.app.version.spring=@spring.version@</pre>
</div>
</div>
<div class="paragraph">
<p>The first line is only necessary if your Pivotal Cloud Foundry instance is using a self-signed certificate.</p>
</div>
<div class="paragraph">
<p>You can also include information from Git which we won&#8217;t do in this workshop. For additional details see this <a href="http://docs.pivotal.io/pivotalcf/1-9/console/spring-boot-actuators.html#git-info">link</a></p>
</div>
</li>
<li>
<p>Save the file</p>
</li>
<li>
<p>Build the application jar file</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ cd &lt;location of your project&gt;
$ ./mvnw clean package -DskipTests</code></pre>
</div>
</div>
</li>
<li>
<p>Push the application to Pivotal Cloud Foundry</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ cf push</code></pre>
</div>
</div>
</li>
<li>
<p>Go back to the Apps Manager, navigate to the Space and click on spring-person.</p>
</li>
<li>
<p>Click the View App link</p>
</li>
<li>
<p>Accept the SSL Security Warnings</p>
</li>
<li>
<p>Go back to Apps Manager and reload the page</p>
<div class="imageblock">
<div class="content">
<img src="images/app-manager-spring-with-git.png" alt="app manager spring with git.png">
</div>
</div>
<div class="paragraph">
<p>Notice the Spring Logo to the left of the application name. This indicates that Apps Manager has recognized this as a Spring Boot application.</p>
</div>
<div class="paragraph">
<p>If you followed the optional Git Information steps above, you&#8217;ll see at the top right, a Git Commit ID</p>
</div>
<div class="paragraph">
<p>Expanding the arrow next to the left of each application instance reveals the health check details, showing you details like the Redis health along with other basic metrics.</p>
</div>
</li>
<li>
<p>Navigate to the Settings tab</p>
<div class="imageblock">
<div class="content">
<img src="images/app-manager-settings-spring.png" alt="app manager settings spring.png">
</div>
</div>
<div class="paragraph">
<p>Notice the additional entries for Git and Spring Boot information where you can view the JSON</p>
</div>
<div class="paragraph">
<p>Note that currently some information is only shown if the Git information has been included.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-03-06 04:56:20 EST
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>